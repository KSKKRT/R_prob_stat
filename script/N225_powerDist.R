library(poweRlaw)
Nikkei225orig = read.csv('~/Downloads/^N225.csv', na.strings = c('null'))
Nikkei225 = subset(Nikkei225orig, complete.cases(Nikkei225orig))
Nikkei225Logdiff = diff(log(Nikkei225$Close))
nl_mean = mean(Nikkei225Logdiff)
nl_sd = sd(Nikkei225Logdiff)
Nikkei225Logdiff_z = (Nikkei225Logdiff - nl_mean) / nl_sd
N225pos = conpl$new(Nikkei225Logdiff_z[Nikkei225Logdiff_z > 0])
#N225neg = conpl$new(-Nikkei225Logdiff_z[Nikkei225Logdiff_z < 0])
est_pos = estimate_xmin(N225pos)
#est_neg = estimate_xmin(N225neg)
N225pos$setXmin(est_pos)
#N225neg$setXmin(est_neg)
plot(N225pos)
lines(N225pos, lwd=2)
#plot(N225neg)
#lines(N225neg, lwd=2)
